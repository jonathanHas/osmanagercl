# =============================================================================
# OS Manager Test - Dedicated Queue Workers Configuration
# Coffee workers + Invoice workers running independently
# Generated: 2025-08-22
# =============================================================================

# COFFEE WORKERS - Handle coffee orders only (default queue)
[program:osmanager-test-coffee-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/html/osmanager-test/artisan queue:work --queue=default --sleep=3 --tries=3 --max-time=3600 --timeout=300
directory=/var/www/html/osmanager-test
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=www-data
numprocs=2
redirect_stderr=true
stdout_logfile=/var/www/html/osmanager-test/storage/logs/coffee-worker.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stopwaitsecs=10

# INVOICE WORKERS - Handle invoice processing only (invoices queue)
[program:osmanager-test-invoice-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/html/osmanager-test/artisan queue:work --queue=invoices --sleep=1 --tries=3 --max-time=3600 --timeout=300
directory=/var/www/html/osmanager-test
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=www-data
numprocs=2
redirect_stderr=true
stdout_logfile=/var/www/html/osmanager-test/storage/logs/invoice-worker.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
stopwaitsecs=10

# Environment variables
environment=LARAVEL_QUEUE_WORKER="true"

# =============================================================================
# Configuration Details:
# =============================================================================
#
# Coffee Workers (2 processes):
# - Process default queue only (coffee monitoring jobs)
# - Sleep 3 seconds between jobs (standard for background tasks)
# - Log to coffee-worker.log
# - Never blocked by invoice processing
#
# Invoice Workers (2 processes):
# - Process invoices queue only (invoice parsing jobs)
# - Sleep 1 second between jobs (faster for user-initiated tasks)
# - Log to invoice-worker.log
# - Never blocked by coffee jobs
#
# Benefits:
# - True independence: uploading 20 invoices won't block coffee orders
# - Dedicated resources for each system
# - Separate logging for easier debugging
# - Scalable: can adjust numprocs for each system independently
#
# =============================================================================